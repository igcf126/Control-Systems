clc
clear

% y/u = (0.1322*Z+0.1096)/(z^2-1.45*Z+0.5712)
% y*(z^2-1.45*Z+0.5712) = u*(0.1322*Z+0.1096)
% y*z^2-y*1.45*Z+y*0.5712 = u*0.1322*Z+u*0.1096
% y-y*1.45*Z^-1+y*0.5712Z^-2 = u*0.1322*Z^-1+u*0.1096*Z^-2
% y = u*0.1322*Z^-1+u*0.1096*Z^-2 + y*1.45*Z^-1 - y*0.5712Z^-2
% y = 0.1322*u1 + 0.1096*u2 + 1.45*y1 - 0.5712*y2

function y = fcn(u)
    persistent u0 u1 y0 y1 u2 y2
    
    if isempty(u0)
        u1=0;u0=0;y1=0;y0=0;u2=0;y2=0;
    end
    
    u2=u1;u1=u0;y2=y1;y1=y0;
    u0=u;
    y = 0.1322*u1 + 0.1096*u2 + 1.45*y1 - 0.5712*y2;
    y0=y;
end